<!DOCTYPE html>

<!--参考URL追記　
https://qiita.com/yamazaki3104/items/b5351f589fb6644bf910
-->

<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>電卓</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div>計算させてください</div>
    <!-- <input value=0><br /> -->
    <input ><br />
        
    <script>
        function update(_v)
        {         //初期状態に戻す　clear 
            document.querySelector('input').value = _v;
        }

        function append(_v)
        {  　　　　//数字を足していく
            document.querySelector('input').value += _v;
            // parseInt(_v)
            // const inputField = document.querySelector('input');
            // const lastChar = inputField.value.slice(-1); // 最後の文字を取得

            // 最後の文字が四則演算の記号かチェックする
            // if (lastChar === '+' || lastChar === '-' || lastChar === '*' || lastChar === '/')
            //     return; // 最後の文字が四則演算だったらappendしない

            // inputField.value += _v;
        }

        function calc()
        {//計算する 1+3を入力すると
            // const v =document.querySelector('input').value;
            const v =document.querySelector('input').value
            // console.log(v); //1+3
            const f =new Function('return ' + parseInt(v));
            // console.log(f); //return 1+3
            update( f().toString());　// なぜ文字列に変換するのかがわからない　整数同士の計算ではないのか❓              
            update( f());　// なぜ文字列に変換するのかがわからない　整数同士の計算ではないのか❓              
            // update( f().parseInt());　// なぜ文字列に変換するのかがわからない　整数同士の計算ではないのか❓              
        }

        /*

        function calc() // 「＝」ボタンが押されたので計算する
    {
        const v = document.querySelector( 'input' ).value;
        const f = new Function( 'return ' + v )
        update( f().toString() )
    }

    関数部分を加えて、onclick時のイベントを関数を変えるしかないと思う
    javascript
    https://nyanblog2222.com/programming/javascript/4496/

    typescript
    https://github.com/BeeBow6/typescript-calculator/tree/master/src

        */

    </script>


<button onclick ="append( '7' )">7</button>
<button onclick ="append( '8' )">8</button>
<button onclick ="append( '9' )">9</button>
<button onclick ="append( '/' )">÷</button><br />

<button onclick ="append( '4' )">4</button>
<button onclick ="append( '5' )">5</button>
<button onclick ="append( '6' )">6</button>
<button onclick ="append( '*' )">✖</button><br />

<button onclick ="append( '1' )">1</button>
<button onclick ="append( '2' )">2</button>
<button onclick ="append( '3' )">3</button>
<button onclick ="append( '-' )">－</button><br /><!-- append関数が+=なのにマイナスを入れてなぜマイナスになるのか❓ -->

<!-- <button onclick ="update( '0' )">C</button> -->
<button onclick ="update( '' )">C</button>
<button onclick ="append( '0' )">0</button>
<button onclick ="calc()" id="clear">=</button>
<button onclick ="append( '+' )">＋</button><br />





<!--console.log(typeof 'append');-->
<!-- 1～0の数字は文字列か？ -->



    <!--
    ・四則演算をinputタグ内に表示しない方法
    ・計算した後、次の文字を入力する際、クリアにならない
    ・1000ずつ,(コンマ)で区切る　ex12,345
    ・スベースの数字と連動する
    ・ 052などのように0はじまりにしない
    ・はじめの初期値を0にする
    ・四則演算の重複をなくす
    ・C（クリア）を押すと0になるようにする
     -->　


<!-- 要素に関しては空白を埋めるように追加していく -->　
</body>
</html>